{% extends "base.html" %}
{% block content %}
<h2>–ú–æ–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</h2>

<p><a href="{{ url_for('add_employee') }}">–î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</a></p>

<div class="employee-cards">
    {% for emp in employees %}
        <div class="employee-card">
            <h4>{{ emp.full_name }}</h4>
            <p><strong>–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è:</strong> {{ emp.birth_date }}</p>
            <p><strong>–ö–æ–Ω—Ç–∞–∫—Ç:</strong> {{ emp.contact }}</p>

            <div class="form-actions mt-0_5rem">
                <a href="{{ url_for('generate_consent', emp_id=emp.id) }}">üìÑ –ü–æ–ª—É—á–∏—Ç—å —Å–æ–≥–ª–∞—Å–∏–µ</a>
                <a href="{{ url_for('add_record', emp_id=emp.id) }}">+ –î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å</a>
            </div>

            {% if emp.records %}
                <div class="record-list">
                    {% for r in emp.records %}
                        <div class="record-block">
                            <p>
                                <strong>üìå –î–æ–ª–∂–Ω–æ—Å—Ç—å:</strong>
                                <span class="wrap-text">{{ r.position }}</span>
                            </p>

                            <p>
                                <strong>üóì –ü—Ä–∏–Ω—è—Ç:</strong> {{ r.hired_at }}
                                {% if r.fired_at %}
                                    ‚Üí <strong>–£–≤–æ–ª–µ–Ω:</strong> {{ r.fired_at }}
                                {% endif %}
                            </p>

                            {% if r.commendation %}
                                <p>
                                    <strong>üëç –ü–æ—Ö–≤–∞–ª–∞:</strong>
                                    <span class="wrap-text">{{ r.commendation }}</span>
                                </p>
                            {% endif %}

                            {% if r.misconduct %}
                                <p>
                                    <strong>‚ö† –ù–∞—Ä—É—à–µ–Ω–∏—è:</strong>
                                    <span class="wrap-text">{{ r.misconduct }}</span>
                                </p>
                            {% endif %}

                            {% if r.dismissal_reason %}
                                <p>
                                    <strong>üö™ –ü—Ä–∏—á–∏–Ω–∞ —É–≤–æ–ª—å–Ω–µ–Ω–∏—è:</strong>
                                    <span class="wrap-text">{{ r.dismissal_reason }}</span>
                                </p>
                            {% endif %}

                            <div class="form-actions">
                                <a href="{{ url_for('edit_record', record_id=r.id) }}">‚úè –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                                <form method="post"
                                      action="{{ url_for('delete_record', record_id=r.id) }}"
                                      onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å?');">
                                    <button type="submit" class="btn-secondary">üóë –£–¥–∞–ª–∏—Ç—å</button>
                                </form>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <div class="record-block mt-1rem text-center">
                  <p class="fs-italic text-gray mb-1rem">
                    –ù–µ—Ç –∑–∞–ø–∏—Å–µ–π. –ü–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å, –ø–æ–¥–ø–∏—à–∏—Ç–µ —Å–æ–≥–ª–∞—Å–∏–µ —Å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–º.
                  </p>
                  <div class="promo-cta">
                    <a href="{{ url_for('generate_consent', emp_id=emp.id) }}" class="big-button">üìÑ –ü–æ–ª—É—á–∏—Ç—å —Å–æ–≥–ª–∞—Å–∏–µ</a>
                    <a href="{{ url_for('user_agreement') }}" class="btn-secondary">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ</a>
                  </div>
                </div>
            {% endif %}
        </div>
    {% endfor %}
</div>

<p><a href="{{ url_for('index') }}">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</a></p>
{% endblock %}