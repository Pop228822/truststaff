{% extends "base.html" %}

{% block content %}
<div class="record-form">
    <h2>Список пользователей</h2>
    <p>Всего пользователей: {{ total_count }}</p>

    <ul>
        {% for u in users %}
        <li style="margin: 0.5rem 0;">
            <strong>ID:</strong> {{ u.id }} |
            <strong>Email:</strong> {{ u.email }} |
            <strong>Верификация:</strong> {{ u.verification_status }}<br>

            <!-- Ссылка на детальную страницу этого пользователя -->
            <a href="/admin/user/{{ u.id }}" style="color: #3498db;">
                Подробнее
            </a>
        </li>
        {% endfor %}
    </ul>

    {% if has_more %}
        <!-- Кнопка "Загрузить ещё", двигаем skip на skip+limit -->
        <form method="get" action="/admin/users">
            <input type="hidden" name="skip" value="{{ skip + limit }}">
            <input type="hidden" name="limit" value="{{ limit }}">
            <button type="submit" class="big-button">Загрузить ещё</button>
        </form>
    {% else %}
        <p>Все пользователи загружены.</p>
    {% endif %}
</div>
{% endblock %}
