{% extends "base.html" %}

{% block content %}
<div class="record-form">
    <h2>üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</h2>
    {% if error_message %}
        <p style="color: red; font-weight: bold;">{{ error_message }}</p>
    {% endif %}
    <form method="post">
        <div class="form-group">
            <label for="full_name">–§–ò–û:</label>
            <input type="text" id="full_name" name="full_name" required>
        </div>

        <div class="form-group">
            <label for="birth_date">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):</label>
            <input type="date" id="birth_date" name="birth_date">
        </div>

        <div class="form-actions">
            <button type="submit">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
        </div>
    </form>
</div>

{% if result is not none %}
<div class="record-form" style="margin-top: 2rem;">
    {% if result %}
        <h3>‚ö† –ù–∞–π–¥–µ–Ω–æ {{ result|length }} —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π:</h3>
        <div class="employee-cards">
        {% for emp in result %}
            <div class="employee-card">
                <h4>{{ emp.full_name }}{% if emp.birth_date %}, {{ emp.birth_date }}{% endif %}</h4>
                <p><strong>–ù–∞—Ä—É—à–µ–Ω–∏–π:</strong> {{ emp.record_count }}</p>

                {% for r in emp.records %}
                    <div class="record-block">
                        <p><strong>üìå –î–æ–ª–∂–Ω–æ—Å—Ç—å:</strong> {{ r.position }}</p>
                        <p><strong>üóì –ü—Ä–∏–Ω—è—Ç:</strong> {{ r.hired_at }}
                        {% if r.fired_at %} ‚Üí <strong>–£–≤–æ–ª–µ–Ω:</strong> {{ r.fired_at }}{% endif %}</p>
                        {% if r.commendation %}<p><strong>üëç –ü–æ—Ö–≤–∞–ª–∞:</strong> {{ r.commendation }}</p>{% endif %}
                        {% if r.misconduct %}<p><strong>‚ö† –ù–∞—Ä—É—à–µ–Ω–∏—è:</strong> {{ r.misconduct }}</p>{% endif %}
                        {% if r.dismissal_reason %}<p><strong>üö™ –ü—Ä–∏—á–∏–Ω–∞ —É–≤–æ–ª—å–Ω–µ–Ω–∏—è:</strong> {{ r.dismissal_reason }}</p>{% endif %}
                    </div>
                {% endfor %}
            </div>
        {% endfor %}
        </div>
    {% else %}
        <p><strong>‚úÖ –°–æ–≤–ø–∞–¥–µ–Ω–∏–π –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.</strong></p>
    {% endif %}
</div>
{% endif %}

<p><a href="/">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</a></p>
{% endblock %}
